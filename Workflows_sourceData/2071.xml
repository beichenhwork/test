<?xml version="1.0" encoding="UTF-8"?><workflow name="simri_mpich_calcul_32cores">  <interface>    <source name="SimulationName" type="string" />    <source name="simriReleaseLfn" type="string" />    <constant name="cstMpiVersion" type="string" value="MPICH2" cardinality="scalar" />    <source name="fileObjLfn" type="string" />    <source name="fileoutName" type="string" />    <sink name="outputFileLfn" type="string" />  </interface>  <processors>    <processor name="appendDate" >      <in name="dir" type="string" depth="0" />      <out name="result" type="string" depth="0" />      <beanshell>import java.text.DateFormat;import java.text.SimpleDateFormat;import java.util.Date;DateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy_HH:mm:ss");String result = dir+"/"+(dateFormat.format(System.currentTimeMillis()));      </beanshell>    </processor>    <processor name="simri_calcul" >      <in name="input3" type="string" depth="0" />      <in name="input2" type="string" depth="0" />      <in name="input4" type="string" depth="0" />      <in name="input1" type="string" depth="0" />      <in name="input0" type="string" depth="0" />      <out name="result0" type="string" depth="0" />      <iterationstrategy>        <cross>          <dot>            <port name="input4" />            <port name="input2" />          </dot>          <cross>            <port name="input3" />            <port name="input0" />            <port name="input1" />          </cross>        </cross>      </iterationstrategy>      <gasw descriptor="lfn://lfc-biomed.in2p3.fr:5010/grid/biomed/creatis/vip/tools/activitites/simulator_components/simri/simri-32cores/simri_mpich_calcul_32cores.xml" />    </processor>    <processor name="detFileOut" >      <in name="fileObjLfn" type="string" depth="0" />      <in name="fileoutName" type="string" depth="0" />      <out name="fileOut" type="string" depth="0" />      <iterationstrategy>        <flat-cross>          <port name="fileoutName" />          <port name="fileObjLfn" />        </flat-cross>      </iterationstrategy>      <beanshell>String [] chuncks =fileObjLfn.split("/", 0);        String fileName=chuncks[(chuncks.length-1)];        String noExt=fileName.substring(0, fileName.lastIndexOf("."));        fileOut=fileoutName.concat("_").concat(noExt).concat(".acr");      </beanshell>    </processor>  </processors>  <links>      <link from="simriReleaseLfn" to="simri_calcul:input0" />      <link from="cstMpiVersion" to="simri_calcul:input1" />      <link from="simri_calcul:result0" to="outputFileLfn" />      <link from="SimulationName" to="appendDate:dir" />      <link from="fileObjLfn" to="detFileOut:fileObjLfn" />      <link from="fileoutName" to="detFileOut:fileoutName" />      <link from="fileObjLfn" to="simri_calcul:input2" />      <link from="appendDate:result" to="simri_calcul:input3" />      <link from="detFileOut:fileOut" to="simri_calcul:input4" />  </links></workflow>