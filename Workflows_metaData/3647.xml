<?xml version="1.0" encoding="UTF-8"?><workflow uri="http://www.myexperiment.org/workflow.xml?id=3647" resource="http://www.myexperiment.org/workflows/3647" id="3647" version="16">  <id>3647</id>  <title>BioVeL ESW DIFF - ENM Statistical Workflow with raster difference computation</title>  <description>The ENM Statistical Difference Workflow (ESW DIFF) allows the computation of the extent and intensity of change in species potential distribution through computation of the differences between two raster layers using the R statistical environment (R Core Team 2013). The difference file is computed from two input files (in this case present projection and 2050 projection) coming from the Ecological Niche Modelling (ENM) Workflow (http://www.myexperiment.org/workflows/3355).The difference between each corresponding raster cell value is computed and stored in the difference file, regardless of the input files’ geographical extent and origin. If the files have a different geographical extent and/or origin the raster-diff workflow automatically crops them to the same extent and resamples the values using the “nearest neighbour” method, resulting in a perfect cell match between the two rasters. The resulting value in the difference file ranges from the negative and positive maximum values of the input files to represent the maximum possible change in both directions. The diff result values are classified into six positive and negative classes. The predicted differences are presented for each species as a heat map, where cells with colors from green to red indicate an increase and from green to blue a decrease of predicted potential for a species. The workflow enables the computation of the raster centerpoints, overall coverage, overall intensity and the difference in intensity or coverage between two raster layers, as well as the distance  between the centerpoints of the two input files (shift vector). The centerpoint is computed as the weighted average of raster cells inside the mask, overall coverage as the percentage of raster cells with values &gt;0, overall intensity as the sum of all valued cells divided by the number of raster cells, and finally the shift vector as the distance between the centerpoints of the two input files using the Vincenty’s formulae. Summary statistics for the raster layers are also provided: number of raster cells, mean intensity, median, CV, SD, Min value, Max value and number of cells outside the mask.This workflow store the computed difference image to the BioVeL Geoserver and create PNG overwiews contains the input and output files and the distribution points. The difference result image could be shown in the BioSTIF web visualisation clientThe workflow contains the computation methods:- Computation of the difference layer:difference = inputfile_B - inputfile_A- Computation of the overall coverage and intensityoverall_coverage = ((ncell(x)-cellStats(x, 'countNA')-count(x,0))/(ncell(x)-cellStats(x, 'countNA')))*100 overall_intensity = cellStats(x, sum)/(ncell(x)-cellStats(x, 'countNA')) - Used standard R functions:cellStats: https://r-forge.r-project.org/scm/viewvc.php/pkg/raster/R/cellStats.R?view=markup&amp;root=rasterThe PNG overview will be created with these values (corresponding to the Geoserver style)ERDASImagine file:breakpoints = c(0,1,25,50,75,100)GeoTIFF filebreakpoints = c(0,2,63,127,190,254)colors =  c(rgb(1.0,1.0,1.0), rgb(0.996,0.898,0.851), rgb(0.988,0.682,0.569), rgb(0.984,0.416,0.290), rgb(0.871,0.176,0.149), rgb(0.647,0.059,0.082))Expected as input files are those raster images as a URL reference e.g. output files from openModeller created by an ENM workflow.*A file upload into the workflow is not possible, only a reference to the input file as URL*Supported formats are:- ERDASImagine (.img) files with a value range 0 - 100, noData value 101- GeoTIFF (.tif) files with a value range 0- 254, noData Value 255Input files with a different extent will be intersected to a common extent and the current layer (inputfile 1) will be resampled to the prediction layer (inputfile 2) using the "nearest neighbor" sampling method.The difference layer will be computed as inputfile_2 - inputfile_1For working with the ESW in a own localhost an R instance should by installed on a own machine (http://cran.r-project.org/). For the computation the followed extensions must be installed: rgdal, raster and rserve. Rserve must be started before the computation.--------------------This workflow has been created by the Biodiversity Virtual e-Laboratory (BioVeL http://www.biovel.eu/) project. BioVeL is funded by the EU’s Seventh Framework Program, grant no. 283359.</description>  <type resource="http://www.myexperiment.org/content_types/2" uri="http://www.myexperiment.org/type.xml?id=2" id="2">Taverna 2</type>  <uploader resource="http://www.myexperiment.org/users/61633" uri="http://www.myexperiment.org/user.xml?id=61633" id="61633">Francisco Quevedo</uploader>  <created-at>2013-07-08 15:05:59 UTC</created-at>  <preview>http://www.myexperiment.org/workflows/3647/versions/16/previews/full</preview>  <svg>http://www.myexperiment.org/workflows/3647/versions/16/previews/svg</svg>  <license-type resource="http://www.myexperiment.org/licenses/2" uri="http://www.myexperiment.org/license.xml?id=2" id="2">by-sa</license-type>  <content-uri>https://myexperiment.org/workflows/3647/download/BioVeL_ESW_DIFF_-_ENM_Statistical_Workflow_with_raster_difference_computation-v.t2flow</content-uri>  <content-type>application/vnd.taverna.t2flow+xml</content-type>  <tags>    <tag uri="http://www.myexperiment.org/tag.xml?id=750" resource="http://www.myexperiment.org/tags/750" id="750">r</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=750" resource="http://www.myexperiment.org/tags/750" id="750">r</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=3160" resource="http://www.myexperiment.org/tags/3160" id="3160">ecological niche modelling</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=1231" resource="http://www.myexperiment.org/tags/1231" id="1231">statistics</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=4388" resource="http://www.myexperiment.org/tags/4388" id="4388">raster difference</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=4389" resource="http://www.myexperiment.org/tags/4389" id="4389">resampling</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=4390" resource="http://www.myexperiment.org/tags/4390" id="4390">heat map</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=4391" resource="http://www.myexperiment.org/tags/4391" id="4391">raster cell count</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=4392" resource="http://www.myexperiment.org/tags/4392" id="4392">raster layer</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=4393" resource="http://www.myexperiment.org/tags/4393" id="4393">occurrence data</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=721" resource="http://www.myexperiment.org/tags/721" id="721">species</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=602" resource="http://www.myexperiment.org/tags/602" id="602">matrix</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=2991" resource="http://www.myexperiment.org/tags/2991" id="2991">biovel</tag>  </tags></workflow>