<?xml version="1.0" encoding="UTF-8"?><workflow uri="http://www.myexperiment.org/workflow.xml?id=3892" resource="http://www.myexperiment.org/workflows/3892" id="3892" version="1">  <id>3892</id>  <title>MatchboxHadoopAPI</title>  <description>&lt;p&gt;The workflow MatchboxHadoopApi.t2flow enables using of matchbox tool on Hadoop with Taverna. This workflow is based on Python scripts and Hadoop Streaming API included in&lt;br /&gt;&amp;quot;pythonwf&amp;quot; folder of pc-qa-matchbox project on github (https://github.com/openplanets/scape/tree/master/pc-qa-matchbox/hadoop/pythonwf).&lt;/p&gt;&lt;p&gt;For this workflow we assume that digital collection is located on HDFS and we have a list of input files in format &amp;quot;hdfs:///user/training/collection/00000032.jp2&amp;quot; - one row per file entry.&lt;br /&gt;This list can be also generated in scripts. Changing python scripts user can customize the workflow and adjust it to the institutional needs.&lt;/p&gt;&lt;p&gt;This workflow does not apply pt-mapred JAR and uses directly Hadoop Streaming API to avoid additional dependencies. The workflow has four input paramters but could be also used with default parameters.&lt;br /&gt;These parameters are:&lt;br /&gt;1. homepath is a path to the scripts on a local machine e.g. &amp;quot;/home/training/pythonwf&amp;quot;&lt;br /&gt;2. hdfspath is a path to the home directory on HDFS e.g. &amp;quot;/user/training&amp;quot;&lt;br /&gt;3. collectionpath is a name of the folder that comprises digital collection on HDFS e.g. &amp;quot;collection&amp;quot;&lt;br /&gt;4. summarypath is a name of the folder that comprises calculation results (list of possible duplicates) on HDFS e.g. &amp;quot;compare&amp;quot;.&lt;/p&gt;&lt;p&gt;The list of possible duplicates can be found in file benchmark_result_list.csv in summary path.&lt;br /&gt;The main script in a workflow is a PythonMatchboxWF.sh that comprises all other scripts. Experienced user could execute each workflow step in a separate module in order to&lt;br /&gt;better manage script parameters.&lt;/p&gt;&lt;p&gt;1. The first step in the workflow is a preparation of input files list and is performed by CreateInputFiles.sh. Result of this step is a file with paths to collection files stored on HDFS&lt;br /&gt;in inputfiles folder.&lt;br /&gt;2. The second step is a SIFT features extraction calculated using &amp;quot;binary&amp;quot; parameter in order to improve performance. Result of this step are feature files for each input file like&lt;br /&gt;&amp;quot;00000031.jp2.SIFTComparison.descriptors.dat&amp;quot;, &amp;quot;00000031.jp2.SIFTComparison.keypoints.dat&amp;quot; and &amp;quot;00000031.jp2.SIFTComparison.feat.xml.gz&amp;quot; stored in matchbox folder on HDFS.&lt;br /&gt;3. The third step is a calculation of Bag of Words (visual dictionary) performed by CmdCalculateBoW.sh. Result is stored in bow folder in bow.xml file on HDFS.&lt;br /&gt;4. Then we extract visual histograms using CmdExtractHistogram.sh for each input file. Result is stored in folder histogram on HDFS e.g. &amp;quot;00000031.jp2.BOWHistogram.feat.xml.gz&amp;quot;.&lt;br /&gt;5. The final step is to perform actual comparison using CmdCompare.sh. Results are stored in compare folder on HDFS and comprise file benchmardk_result_list.csv that&lt;br /&gt;presents possible duplicates - one pair per row e.g. img1;img2;similarity between 0 (low) and 1 (high)&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;</description>  <type resource="http://www.myexperiment.org/content_types/2" uri="http://www.myexperiment.org/type.xml?id=2" id="2">Taverna 2</type>  <uploader resource="http://www.myexperiment.org/users/17168" uri="http://www.myexperiment.org/user.xml?id=17168" id="17168">Roman</uploader>  <created-at>2013-11-05 10:21:56 UTC</created-at>  <preview>http://www.myexperiment.org/workflows/3892/versions/1/previews/full</preview>  <svg>http://www.myexperiment.org/workflows/3892/versions/1/previews/svg</svg>  <license-type resource="http://www.myexperiment.org/licenses/2" uri="http://www.myexperiment.org/license.xml?id=2" id="2">by-sa</license-type>  <content-uri>https://myexperiment.org/workflows/3892/download/MatchboxHadoopAPI-v.t2flow</content-uri>  <content-type>application/vnd.taverna.t2flow+xml</content-type>  <tags>    <tag uri="http://www.myexperiment.org/tag.xml?id=3696" resource="http://www.myexperiment.org/tags/3696" id="3696">matchbox</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=4008" resource="http://www.myexperiment.org/tags/4008" id="4008">hadoop streaming api</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=2963" resource="http://www.myexperiment.org/tags/2963" id="2963">python</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=2774" resource="http://www.myexperiment.org/tags/2774" id="2774">quality assurance</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=3592" resource="http://www.myexperiment.org/tags/3592" id="3592">duplicates search</tag>  </tags></workflow>