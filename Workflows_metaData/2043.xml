<?xml version="1.0" encoding="UTF-8"?><workflow uri="http://www.myexperiment.org/workflow.xml?id=2043" resource="http://www.myexperiment.org/workflows/2043" id="2043" version="1">  <id>2043</id>  <title>Minimum Deformation Template (MDT) Atlasing Workflow</title>  <description>&lt;p&gt;This pipeline present the redesigned automated  workflow for constructing the Minimum Distance Template (MDT) atlas for  a given population, based on one specific image modality (e.g., sMRI).  There will be two specific validation examples based on 100+ &lt;a target="_top" href="http://www.loni.ucla.edu/ICBM/"&gt;ICBM&lt;/a&gt; subjects:&lt;/p&gt;&#13;&lt;ul&gt;&#13;    &lt;li&gt;&lt;strong&gt;Quantitative&lt;/strong&gt;: The ICBM data will be registered to the MDT, &lt;a target="_top" href="http://nru.dk/software/"&gt;NRU&lt;/a&gt; and &lt;a target="_top" href="http://www.loni.ucla.edu/Atlases/Atlas_Detail.jsp?atlas_id=6"&gt;ICBM 462&lt;/a&gt;  atlases and mean displacement stats across all subjects will be  reported for each voxel. The distributions of these mean displacement  magnitudes for all 3 atlases will also be shown.&lt;/li&gt;&#13;    &lt;li&gt;&lt;strong&gt;Qualitative&lt;/strong&gt; (visual): The resulting MDT atlas will be visually compared to the &lt;a target="_top" href="http://www.loni.ucla.edu/Atlases/Atlas_Detail.jsp?atlas_id=6"&gt;ICBM 462 atlas&lt;/a&gt; and the &lt;a target="_top" href="http://nru.dk/software/"&gt;Danish NRU atlas&lt;/a&gt; constructed of the same 100+ subjects.&amp;nbsp;&lt;/li&gt;&#13;&lt;/ul&gt;&#13;&lt;h3&gt;&lt;a name="Pipeline_design"&gt; &lt;/a&gt; Pipeline design&lt;/h3&gt;&#13;&lt;ul&gt;&#13;    &lt;li&gt;All non-linear warping tools use the KL MI registration algorithm, described &lt;a target="_top" href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.131.9890&amp;amp;rep=rep1&amp;amp;type=pdf"&gt;here&lt;/a&gt;. A symmetric optimization described &lt;a target="_top" href="http://loni.ucla.edu/twiki/pub/CCB/CCB_Roadmap2007_UnsolvedProblems_Registration01/Leow_Yanovsky_Chiang_Thompson2007.pdf"&gt;here&lt;/a&gt; is applied in place of the original, making the algorithm much more robust and suitable for cross-subject registration.&lt;/li&gt;&#13;    &lt;li&gt;The KL MI tool is incorporated in a multiscale bundle which begins  with a small working grid of 32^3 and goes on to 64^3 and 128^3. This  approach allows for larger initial deformations where necessary,  ensuring that the fine resolution step is devoted entirely to local  deformations. Currently, no information about the previous step's final  displacement field is available to the subsequent step, making this  approach equivalent to regriding. This may be changed in the future.&lt;/li&gt;&#13;    &lt;li&gt;&lt;strong&gt;Input is assumed to be a set of linearly registered  subjects, whose mean has been precomputed. The Air reconcile workflow is  used for this. It is attached at the bottom.&lt;/strong&gt; This workflow  performs n^2 linear registrations and defines the common space based on  the reconcile routine. This can take several hours, depending on the  number of images, but is generally much better than simply picking one  subject as target.&lt;/li&gt;&#13;&lt;/ul&gt;&#13;&lt;p&gt;&amp;nbsp;&lt;a name="1_MDT_symmetric_multiscale"&gt; &lt;/a&gt; 1. MDT_symmetric_multiscale&lt;/p&gt;&#13;&lt;ul&gt;&#13;    &lt;li&gt;This workflow follows the typical MDT algorithm, first using an  affine mean to initially warp the images, then deforming the new mean  according the inverse of the new warp field average (this creates the  MDT), and finally registering all images to the newly created MDT. MDT  as well as final Jacobians and registered images are saved.&lt;/li&gt;&#13;    &lt;li&gt;The workflow is faster than the iterative version below, but can still take up to 12 hours on a busy grid.&lt;/li&gt;&#13;&lt;/ul&gt;&#13;&lt;h5&gt;&lt;a name="2_MDT_symmetric_iterative"&gt; &lt;/a&gt; 2. MDT_symmetric_iterative&amp;nbsp;&lt;/h5&gt;&#13;&lt;ul&gt;&#13;    &lt;li&gt;This workflow selects a median image and iteratively moves it ever-closer to the middle of the data space.&lt;/li&gt;&#13;    &lt;li&gt;Median is defined as the image with the lowest L2 distance to the  median image of the data set. It is in fact one of the inputs. The  advantage of using this instead of a warp mean is that details are fully  preserved. The disadvantage is that the warping is more susceptible to  local minima. The new warping algorithm seems to overcome this quite  well, though.&lt;/li&gt;&#13;    &lt;li&gt;Once a target image has been selected, it is used exactly as the  MDT, except iteratively: with each new iteration the new field average  is inverted and composed with the previous target warp, moving the image  a bit closer to the middle.&lt;/li&gt;&#13;    &lt;li&gt;There is no limit on the number of iterations. Currently it is set  at 3 (plus the final registration), but one can see that the overall  registration continues to improve across input images even at the last  step. It is also interesting that often the final target looks very  similar in general form and large ROIS like the ventricles and the  corpus callosum to the MDT result of the previous workflow. The only  difference is sharpness is level of detail.&lt;/li&gt;&#13;&lt;/ul&gt;&#13;&lt;p&gt;&amp;nbsp;&lt;a name="3_One_subject"&gt; &lt;/a&gt; 3. One_subject&amp;nbsp;&lt;/p&gt;&#13;&lt;ul&gt;&#13;    &lt;li&gt;This workflow registers all images to a selected median, similarly  to the iterative workflow. The difference is that here it is only done  once, and no inversion is applied.&lt;/li&gt;&#13;&lt;/ul&gt;&#13;&lt;h5&gt;&lt;a name="4_Existing_atlas"&gt; &lt;/a&gt; 4. Existing_atlas&lt;/h5&gt;&#13;&lt;ul&gt;&#13;    &lt;li&gt;This worflow uses the ICBM atlas to align images into a common space. Images are pre-aligned linearly.&lt;/li&gt;&#13;    &lt;li&gt;We found that 12-parameter AIR does not work very well here, even  with histogram equalization and bias correction. We simply use  9-parameter registration instead.&lt;/li&gt;&#13;&lt;/ul&gt;&#13;&lt;p&gt;&amp;nbsp;URL: http://www.loni.ucla.edu/twiki/bin/view/CCB/SIGPNS_Summer2009_BG_CS_2&lt;/p&gt;&#13;&lt;p&gt;&lt;a href="http://users.loni.ucla.edu/~pipelnvr/serverlib/jnlp_writer.php?url=http://www.loni.ucla.edu/~pipelnvr/serverlib/pws/Minimum_Distance_Template/Groups/KL_MI_existing_atlas_sym.pipe&amp;amp;execute=true"&gt;&lt;b&gt;Try this pipeline workflow online now!&lt;/b&gt;&lt;/a&gt;&lt;/p&gt;</description>  <type resource="http://www.myexperiment.org/content_types/83" uri="http://www.myexperiment.org/type.xml?id=83" id="83">LONI Pipeline</type>  <uploader resource="http://www.myexperiment.org/users/15656" uri="http://www.myexperiment.org/user.xml?id=15656" id="15656">Pipeline</uploader>  <created-at>2011-04-06 00:51:59 UTC</created-at>  <preview>http://www.myexperiment.org/workflows/2043/versions/1/previews/full</preview>  <svg>http://www.myexperiment.org/workflows/2043/versions/1/previews/svg</svg>  <license-type resource="http://www.myexperiment.org/licenses/2" uri="http://www.myexperiment.org/license.xml?id=2" id="2">by-sa</license-type>  <content-uri>https://myexperiment.org/workflows/2043/download/Minimum_Deformation_Template__MDT__Atlasing_Workflow-v.pipe</content-uri>  <content-type>application/octet-stream</content-type>  <tags>    <tag uri="http://www.myexperiment.org/tag.xml?id=2483" resource="http://www.myexperiment.org/tags/2483" id="2483">pipeline</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=2510" resource="http://www.myexperiment.org/tags/2510" id="2510">neuroimaging</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=2511" resource="http://www.myexperiment.org/tags/2511" id="2511">minimum distance template</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=2512" resource="http://www.myexperiment.org/tags/2512" id="2512">mdt</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=2513" resource="http://www.myexperiment.org/tags/2513" id="2513">atlas</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=1960" resource="http://www.myexperiment.org/tags/1960" id="1960">brain imaging</tag>  </tags></workflow>