<?xml version="1.0" encoding="UTF-8"?><workflow uri="http://www.myexperiment.org/workflow.xml?id=3856" resource="http://www.myexperiment.org/workflows/3856" id="3856" version="5">  <id>3856</id>  <title>BioVeL ESW STACK - ENM Statistical Workflow with raster stack computation</title>  <description>The ENM Statistical Stack Workflow (ESW STACK) allows the computation of the extent, intensity and a cummulated potential species distribution through computation of an average sum layer from the input raster layers using the R statistical environment (R Core Team 2013). The sum layer is computed from all input files. e.g from different distribution of species as a mean value from each corresponding raster cell values, coming from the Ecological Niche Modelling (ENM) Workflow (http://www.myexperiment.org/workflows/3355).The average sum layer computed from each corresponding raster cell values is stored together with all input layers in a multilayer stack file, regardless of the input files’ geographical extent and origin. If the files have a different geographical extent and/or origin, the raster-diff workflow automatically crop them to the same extent and resample the values using the “nearest neighbour” method, resulting in a perfect cell match between the two rasters. The resulting values in the average sum file depends of the value range of the input files and will be normalized to their value range. The values of the input layers and the average sum layer are classified into six positive classes. The predicted differences are presented for each species as a heat map, where cells with colors from green to red indicate an increase and from green to blue a decrease of predicted potential for a species. The workflow enables the computation of overall coverage, overall intensity and the difference in intensity or coverage between two raster layers. Overall coverage is computed as the percentage of raster cells with values &gt;0, and overall intensity is computed as the sum of all valued cells divided by the number of raster cells. Summary statistics for the raster layers are also provided: number of raster cells, mean intensity, median, CV, SD, Min value, Max value and number of cells outside the mask.The workflow contains the computation methods:- Computation of the average sum layer:sum_layer = sum(layerstack, na.rm=FALSE)average_sum_layer = (sum_layer /(nlayers(layerstack)*maxValue)) * maxValue.- Computation of the overall coverage and intensityoverall_coverage = ((ncell(x)-cellStats(x, 'countNA')-count(x,0))/(ncell(x)-cellStats(x, 'countNA')))*100 overall_intensity = cellStats(x, sum)/(ncell(x)-cellStats(x, 'countNA')) - Computation of the covariance matrix:The covariance (the measure of how much two random variables change together)matrix will be computed using  standard functions in R: layerStats(layerstack,"cov",na.rm=TRUE) with excusion of noData values.- Used standard R functions:cellStats: https://r-forge.r-project.org/scm/viewvc.php/pkg/raster/R/cellStats.R?view=markup&amp;root=rasterlayerStats: https://r-forge.r-project.org/scm/viewvc.php/pkg/raster/R/layerStats.R?view=markup&amp;root=rasterThis workflow create a multilayer stack file as output and create PNG thumbnais and PNG overwiews from the input files and the average sum layer. A second multilayer stack can display different pointsets relatet to each PNGThe PNG overview will be created with these values (corresponding to the Geoserver style)ERDASImagine file:breakpoints = c(0,1,25,50,75,100)GeoTIFF filebreakpoints = c(0,2,63,127,190,254)colors =  c(rgb(1.0,1.0,1.0), rgb(0.996,0.898,0.851), rgb(0.988,0.682,0.569), rgb(0.984,0.416,0.290), rgb(0.871,0.176,0.149), rgb(0.647,0.059,0.082))Expected as input files are those raster images as a URL reference e.g. output files from openModeller created by an ENM workflow.*A file upload into the workflow is not possible, only a reference to the input file as URL*Supported formats are:- ERDASImagine (.img) files with a value range 0 - 100, noData value 101- GeoTIFF (.tif) files with a value range 0- 254, noData Value 255Input files with a different extent will be intersected to a common extent and resampled to each other using the "nearest neighbor" sampling method.For working with the ESW in a own localhost an R instance should by installed on a own machine (http://cran.r-project.org/). For the computation the followed extensions must be installed: rgdal, raster and rserve. Rserve must be started before the computation.--------------------This workflow has been created by the Biodiversity Virtual e-Laboratory (BioVeL http://www.biovel.eu/) project. BioVeL is funded by the EU’s Seventh Framework Program, grant no. 283359.</description>  <type resource="http://www.myexperiment.org/content_types/2" uri="http://www.myexperiment.org/type.xml?id=2" id="2">Taverna 2</type>  <uploader resource="http://www.myexperiment.org/users/61633" uri="http://www.myexperiment.org/user.xml?id=61633" id="61633">Francisco Quevedo</uploader>  <created-at>2013-10-13 12:27:09 UTC</created-at>  <preview>http://www.myexperiment.org/workflows/3856/versions/5/previews/full</preview>  <svg>http://www.myexperiment.org/workflows/3856/versions/5/previews/svg</svg>  <license-type resource="http://www.myexperiment.org/licenses/2" uri="http://www.myexperiment.org/license.xml?id=2" id="2">by-sa</license-type>  <content-uri>https://myexperiment.org/workflows/3856/download/BioVeL_ESW_STACK_-_ENM_Statistical_Workflow_with_raster_stack_computation-v.t2flow</content-uri>  <content-type>application/vnd.taverna.t2flow+xml</content-type>  <tags>    <tag uri="http://www.myexperiment.org/tag.xml?id=2991" resource="http://www.myexperiment.org/tags/2991" id="2991">biovel</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=3160" resource="http://www.myexperiment.org/tags/3160" id="3160">ecological niche modelling</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=4393" resource="http://www.myexperiment.org/tags/4393" id="4393">occurrence data</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=750" resource="http://www.myexperiment.org/tags/750" id="750">r</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=1231" resource="http://www.myexperiment.org/tags/1231" id="1231">statistics</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=2615" resource="http://www.myexperiment.org/tags/2615" id="2615">heatmap</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=4395" resource="http://www.myexperiment.org/tags/4395" id="4395">covariance</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=4396" resource="http://www.myexperiment.org/tags/4396" id="4396">png</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=3017" resource="http://www.myexperiment.org/tags/3017" id="3017">average</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=721" resource="http://www.myexperiment.org/tags/721" id="721">species</tag>    <tag uri="http://www.myexperiment.org/tag.xml?id=4389" resource="http://www.myexperiment.org/tags/4389" id="4389">resampling</tag>  </tags></workflow>